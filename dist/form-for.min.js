angular.module("formFor.templates",[]).run(["$templateCache",function(n){n.put("form-for/templates/checkbox-field.html",'<div  class="field checkbox-field"\n      ng-class="{disabled: disable || disabledByForm, \'has-error\': error}">\n\n  <p ng-if="error" class="text-danger field-error left-aligned" ng-bind="error"></p>\n\n  <label>\n    <div class="checkbox-field-input" ng-class="{\'is-checked\': model.bindable}"></div>\n\n    <input  type="checkbox" ng-model="model.bindable"\n            class="field-input"\n            ng-disabled="disable || disabledByForm">\n\n    <field-label  ng-if="label"\n                  label="{{label}}"\n                  help="{{help}}"\n                  ng-click="toggle()">\n    </field-label>\n  </label>\n</div>\n'),n.put("form-for/templates/field-label.html",'<label  class="field-label"\n        popover="{{help}}"\n        popover-trigger="mouseenter"\n        popover-placement="right">\n\n  <span ng-bind-html="bindableLabel"></span>\n\n  <span ng-if="help" class="fa-stack help-icon-stack">\n    <i class="fa fa-stack-2x fa-circle help-background-icon"></i>\n    <i class="fa fa-stack-1x fa-inverse fa-question help-foreground-icon"></i>\n  </span>\n\n  <span class="label label-default field-label-required-label" ng-if="requiredLabel" ng-bind="requiredLabel"></span>\n</label>\n'),n.put("form-for/templates/radio-field.html",'<span class="field radio-field"\n      ng-class="{disabled: disable || disabledByForm, \'has-error\': error}">\n\n  <p ng-if="error" class="text-danger field-error left-aligned" ng-bind="error"></p>\n\n  <label>\n    <span  class="radio-field-input" ng-class="{\'is-selected\': model.bindable === value}"\n          ng-click="click()"></span>\n\n    <input  type="radio" ng-model="model.bindable" ng-value="value"\n            class="field-input"\n            ng-disabled="disable || disabledByForm">\n\n    <field-label  ng-if="label"\n                  label="{{label}}"\n                  help="{{help}}"\n                  ng-click="click()">\n    </field-label>\n  </label>\n</span>\n'),n.put("form-for/templates/select-field.html",'<div  class="form-group field select-field"\n      ng-class="{disabled: disable || disabledByForm, open: isOpen, \'has-error\': error}">\n\n  <field-label  ng-if="label"\n                label="{{label}}"\n                help="{{help}}"\n                required="{{model.required}}">\n  </field-label>\n\n  <p ng-if="error" class="text-danger field-error" ng-bind="error"></p>\n\n  <div  class="form-control select-field-toggle-button"\n        ng-class="{open: isOpen, disabled: disable || disabledByForm}">\n\n    <span ng-if="selectedOptionLabel" ng-bind="selectedOptionLabel"></span>\n\n    <span ng-if="!selectedOptionLabel">\n      <span ng-if="placeholder" ng-bind="placeholder"></span>\n      <span ng-if="!placeholder">Select</span>\n    </span>\n\n    <span class="fa fa-caret-down pull-right select-field-toggle-caret"></span>\n  </div>\n\n  <div ng-show="isOpen" class="list-group-container">\n    <div class="list-group">\n      <div  ng-show="enableFiltering" class="input-group filter-input-group"\n            ng-click="$event.stopPropagation()">\n        <input  type="text"\n                class="form-control text-field-input filter-text-input"\n                ng-model="filter"\n                ng-keydown="keyDown($event)"\n                form-for-debounce="{{filterDebounce}}" />\n\n        <span class="input-group-addon input-group-addon-after">\n          <i class="fa fa-search text-field-icon"></i>\n        </span>\n      </div>\n\n      <div class="list-group-scrollable">\n        <a  class="list-group-item"\n            ng-repeat="option in filteredOptions"\n            ng-value="option[valueAttribute]"\n            ng-click="selectOption(option)"\n            ng-mouseenter="mouseOver($index)"\n            ng-class="{active: option === selectedOption, hover: $index === mouseOverIndex}">\n\n          <!-- Bootstrap leaves us no way to style a non-:hover element so we fall back to <strong> -->\n          <strong ng-if="$index === mouseOverIndex" ng-bind="option[labelAttribute]"></strong>\n          <span ng-if="$index !== mouseOverIndex" ng-bind="option[labelAttribute]"></span>\n          <spgn ng-if="!option[labelAttribute]">&nbsp;</spgn> <!-- Gracefully handle empty/null names -->\n        </a>\n\n        <a ng-if="!options" class="list-group-item">\n          <i class="fa fa-circle-o-notch fa-spin"></i>\n          Loading...\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n'),n.put("form-for/templates/submit-button.html",'<button class="btn btn-default submit-button" ng-disabled="disable || disabledByForm">\n  <i ng-if="icon" class="submit-button-icon" ng-class="icon"></i>\n\n  <span ng-bind-html="bindableLabel"></span>\n</button>\n'),n.put("form-for/templates/text-field.html",'<div  class="form-group field text-field"\n      ng-class="{disabled: disable || disabledByForm, \'has-error\': error}">\n\n  <field-label  ng-if="label"\n                label="{{label}}"\n                help="{{help}}"\n                required="{{model.required}}">\n  </field-label>\n\n  <p ng-if="error" class="text-danger field-error" ng-bind="error"></p>\n\n  <div ng-class="{\'input-group\': iconBefore || iconAfter}">\n    <span ng-if="iconBefore" class="input-group-addon input-group-addon-before"\n          ng-click="onIconBeforeClick()">\n      <i class="text-field-icon" ng-class="iconBefore"></i>\n    </span>\n\n    <input  ng-if="!multiline"\n            type="{{type}}"\n            class="form-control text-field-input"\n            ng-class="{\'has-icon-before\': iconBefore, \'has-icon-after\': iconAfter}"\n            ng-disabled="disable || disabledByForm"\n            placeholder="{{placeholder}}"\n            ng-model="model.bindable"\n            form-for-debounce="{{debounce}}"\n            ng-click="onFocus()" />\n\n\n    <textarea ng-if="multiline"\n              class="form-control text-field-input"\n              ng-class="{\'has-icon-before\': iconBefore, \'has-icon-after\': iconAfter}"\n              ng-disabled="disable || disabledByForm"\n              placeholder="{{placeholder}}"\n              ng-model="model.bindable"\n              form-for-debounce="{{debounce}}"\n              ng-click="onFocus()">\n    </textarea>\n\n    <span ng-if="iconAfter" class="input-group-addon input-group-addon-after"\n          ng-click="onIconAfterClick()">\n      <i class="text-field-icon" ng-class="iconAfter"></i>\n    </span>\n  </div>\n</div>\n'),n.put("form-for/templates/type-ahead-field.html",'<div  class="form-group field type-ahead-field"\n      ng-class="{disabled: disable || disabledByForm, \'has-error\': error}">\n\n  <field-label  ng-if="label"\n                label="{{label}}"\n                help="{{help}}"\n                required="{{model.required}}">\n  </field-label>\n\n  <p ng-if="error" class="text-danger field-error" ng-bind="error"></p>\n\n  <input  type="text"\n          class="form-control type-ahead-field-input"\n          placeholder="{{placeholder}}"\n          ng-model="model.selectedOption"\n          ng-change="changeHandler()"\n          typeahead="option as option[labelAttribute] for option in filteredOptions"\n          typeahead-wait-ms="debounce || 1000">\n</div>\n')}]);
angular.module("formFor",["formFor.templates"]),angular.module("formFor").directive("checkboxField",["$log","FieldHelper",function(e,t){return{require:"^formFor",restrict:"EA",templateUrl:"form-for/templates/checkbox-field.html",scope:{attribute:"@",disable:"@",help:"@?"},link:function(r,i,o,a){if(!r.attribute)return void e.error('Missing required field "attribute"');r.model=a.registerFormField(r,r.attribute),r.label=t.getLabel(o,r.attribute);i.find("input");r.toggle=function(){r.disable||r.disabledByForm||(r.model.bindable=!r.model.bindable)}}}}]),angular.module("formFor").directive("fieldLabel",["$sce","FormForConfiguration",function(e,t){return{restrict:"EA",templateUrl:"form-for/templates/field-label.html",scope:{help:"@?",label:"@",required:"@?"},controller:["$scope",function(r){r.$watch("label",function(t){r.bindableLabel=e.trustAsHtml(t)}),r.required&&(r.requiredLabel=t.requiredLabel)}]}}]),angular.module("formFor").directive("formForDebounce",["$log","$timeout","FormForConfiguration",function(e,t,r){return{restrict:"A",require:"ngModel",priority:99,link:function(i,o,a,n){if("radio"===a.type||"checkbox"===a.type)return void e.warn("formForDebounce should only be used with <input type=text> and <textarea> elements");var l,u=a.formForDebounce,s=r.defaultDebounceDuration;void 0!==u&&("false"===u.toString()?s=!1:(u=parseInt(u),angular.isNumber(u)&&!isNaN(u)&&(s=u))),o.unbind("input"),s!==!1&&o.bind("input",function(){t.cancel(l),l=t(function(){i.$apply(function(){n.$setViewValue(o.val())})},s)}),o.bind("blur",function(){i.$apply(function(){n.$setViewValue(o.val())})}),i.$on("$destroy",function(){l&&t.cancel(l)})}}}]),angular.module("formFor").directive("formFor",["$injector","$parse","$q","$sce","FormForConfiguration","$FormForStateHelper","NestedObjectHelper","ModelValidator",function(e,t,r,i,o,a,n,l){return{require:"form",restrict:"A",scope:{controller:"=?",disable:"=?",errorMap:"=?",formFor:"=",service:"@",submitComplete:"&?",submitError:"&?",submitWith:"&?",valid:"=?",validationRules:"=?"},controller:["$scope",function(o){o.formFieldScopes={},o.bindable={},o.scopeWatcherUnwatchFunctions=[],o.submitButtonScopes=[],o.service&&(o.$service=e.get(o.service)),o.$validationRules=o.$service?o.$service.validationRules:o.validationRules,this.registerFormField=function(e,r){var i=n.flattenAttribute(r),a=n.readAttribute(o.$validationRules,r);o.formFieldScopes[r]=e,o.bindable[i]={bindable:null,required:a&&!!a.required};var l=t(r),s=l.assign;return o.$watch("bindable."+i+".bindable",function(e,t){e!==t&&s(o.formFor,e)}),o.$watch("formFor."+r,function(){o.bindable[i].bindable=l(o.formFor)}),u(r),o.bindable[i]},this.registerSubmitButton=function(e){o.submitButtonScopes.push(e)},this.resetErrors=function(){o.formForStateHelper.setFormSubmitted(!1);var e=n.flattenObjectKeys(o.errorMap);angular.forEach(e,function(e){o.formForStateHelper.setFieldHasBeenModified(e,!1)})},o.controller=o.controller||{},o.controller.registerFormField=this.registerFormField,o.controller.registerSubmitButton=this.registerSubmitButton,o.controller.resetErrors=this.resetErrors,o.$watch("disable",function(e){angular.forEach(o.formFieldScopes,function(t){t.disabledByForm=e}),angular.forEach(o.submitButtonScopes,function(t){t.disabledByForm=e})}),o.formForStateHelper=new a(o);var u=function(e){{var t;o.formFieldScopes[e]}return o.$watch("formFor."+e,function(r,i){t?(void 0!==i||""!==r)&&o.formForStateHelper.setFieldHasBeenModified(e,!0):t=!0,o.$validationRules&&l.validateField(o.formFor,e,o.$validationRules).then(function(){o.formForStateHelper.setFieldError(e,null)},function(t){o.formForStateHelper.setFieldError(e,t)})})};o.$watch("formForStateHelper.watchable",function(){var e=o.formForStateHelper;angular.forEach(o.formFieldScopes,function(t,r){if(e.hasFormBeenSubmitted()||e.hasFieldBeenModified(r)){var o=e.getFieldError(r);t.error=o?i.trustAsHtml(o):null}else t.error=null})}),o.updateErrors=function(e){angular.forEach(o.formFieldScopes,function(t,r){var i=n.readAttribute(e,r);o.formForStateHelper.setFieldError(r,i)})},o.validateAll=function(){o.updateErrors({});var e;return e=o.$validationRules?l.validateFields(o.formFor,Object.keys(o.formFieldScopes),o.$validationRules):r.resolve(),e.then(angular.noop,o.updateErrors),e},o.$on("$destroy",function(){angular.forEach(o.scopeWatcherUnwatchFunctions,function(e){e()})})}],link:function(e,t,i){t.on("submit",function(){return e.formForStateHelper.setFormSubmitted(!0),e.disable=!0,e.validateAll().then(function(){var t;t=i.submitWith?e.submitWith({data:e.formFor}):e.$service&&e.$service.submit?e.$service.submit(e.formFor):r.reject("No submit function provided"),t||(t=r.reject("Submit function did not return a promise")),t.then(function(t){i.submitComplete?e.submitComplete({data:t}):o.defaultSubmitComplete(t)},function(t){angular.isObject(t)&&e.updateErrors(t),i.submitError?e.submitError({error:t}):o.defaultSubmitError(t)}),t["finally"](function(){e.disable=!1})},function(){e.disable=!1}),!1})}}}]),angular.module("formFor").directive("radioField",["$log","FieldHelper",function(e,t){var r={};return{require:"^formFor",restrict:"EA",templateUrl:"form-for/templates/radio-field.html",scope:{attribute:"@",disable:"@",help:"@?",value:"@"},link:function(i,o,a,n){if(!i.attribute)return void e.error('Missing required field "attribute"');r[i.attribute]||(r[i.attribute]={defaultScope:i,scopes:[],model:n.registerFormField(i,i.attribute)});var l=r[i.attribute];l.scopes.push(i),i.model=l.model,i.label=t.getLabel(a,i.value);var u=o.find("input");i.click=function(){i.disable||i.disabledByForm||(i.model.bindable=i.value)},l.defaultScope.$watch("disable",function(e){i.disable=e}),l.defaultScope.$watch("disabledByForm",function(e){i.disabledByForm=e}),i.$watch("model.bindable",function(e){e===i.value?u.attr("checked",!0):u.removeAttr("checked")}),i.$on("$destroy",function(){l.scopes.splice(l.scopes.indexOf(i),1),0===l.scopes.length&&delete r[i.attribute]})}}}]),angular.module("formFor").directive("selectField",["$document","$log","$timeout","FieldHelper",function(e,t,r,i){return{require:"^formFor",restrict:"EA",templateUrl:"form-for/templates/select-field.html",scope:{attribute:"@",disable:"@",filter:"=?",filterDebounce:"@?",help:"@?",options:"=",placeholder:"@?"},link:function(o,a,n,l){if(!o.attribute)return void t.error('Missing required field "attribute"');o.allowBlank=n.hasOwnProperty("allowBlank"),o.enableFiltering=n.hasOwnProperty("enableFiltering"),o.labelAttribute=n.labelAttribute||"label",o.valueAttribute=n.valueAttribute||"value",o.model=l.registerFormField(o,o.attribute),o.label=i.getLabel(n,o.attribute),o.emptyOption={},o.filteredOptions=[];var u=function(e){return e&&e.toLowerCase()},s=function(){var e=o.options||[];if(o.filteredOptions.splice(0),o.enableFiltering&&o.filter){var t=u(o.filter);angular.forEach(e,function(e){var r=u(e[o.labelAttribute]).indexOf(t);r>=0&&o.filteredOptions.push(e)})}else angular.copy(e,o.filteredOptions);o.allowBlank&&o.filteredOptions.unshift(o.emptyOption)};o.$watch("filter",s),o.$watch("options.length",s);var d=function(){var e,t=o.selectedOption&&o.selectedOption[[o.valueAttribute]];o.model.bindable!==t&&(angular.forEach(o.options,function(t){t[o.valueAttribute]===o.model.bindable&&(e=t)}),o.selectedOption=e,o.selectedOptionLabel=e&&e[o.labelAttribute])};o.$watch("model.bindable",d),o.$watch("options",d),o.$watch("model.bindable",function(e){for(var t,r=0;r<o.filteredOptions.length;r++){var i=o.filteredOptions[r];if(i[o.valueAttribute]===e){t=i;break}}o.selectedOption=t,o.selectedOptionLabel=t&&t[o.labelAttribute]});var c=function(e,t){r(function(){e.one("click",t)},1)},f=function(){e.off("click",p)},m=function(){c(a.find(".select-field-toggle-button"),g)};o.selectOption=function(e){o.model.bindable=e&&e[o.valueAttribute],o.isOpen=!1,f(),m()};var p=function(){o.isOpen=!1,o.$apply(),f(),m()},b=a.find(".list-group-container"),F=a.find(".list-group"),g=function(){if(o.disable||o.disabledByForm)return void m();if(o.isOpen=!o.isOpen,o.isOpen){c(e,p);var t=o.model.bindable;r(angular.bind(this,function(){for(var e,r=F.find(".list-group-item"),i=0;i<r.length;i++){var a=r[i],n=$(a).scope().option;if(n&&n[o.valueAttribute]===t){e=a;break}}e&&b.scrollTop($(e).offset().top-$(e).parent().offset().top)}),1)}};m(),o.mouseOver=function(e){o.mouseOverIndex=e,o.mouseOverOption=e>=0?o.filteredOptions[e]:null},o.keyDown=function(e){switch(e.keyCode){case 27:o.isOpen=!1;break;case 13:o.selectOption(o.mouseOverOption),o.isOpen=!1,e.preventDefault(),e.stopPropagation();break;case 38:o.mouseOver(o.mouseOverIndex>0?o.mouseOverIndex-1:o.filteredOptions.length-1);break;case 40:o.mouseOver(o.mouseOverIndex<o.filteredOptions.length-1?o.mouseOverIndex+1:0)}},o.$watchCollection("[isOpen, filteredOptions.length]",function(){o.mouseOver(-1)}),o.$on("$destroy",function(){f()})}}}]),angular.module("formFor").directive("submitButton",["$log","$sce",function(e,t){return{require:"^formFor",restrict:"EA",templateUrl:"form-for/templates/submit-button.html",scope:{disable:"@",icon:"@",label:"@"},link:function(e,r,i,o){e["class"]=i["class"],e.$watch("label",function(r){e.bindableLabel=t.trustAsHtml(r)}),o.registerSubmitButton(e)}}}]),angular.module("formFor").directive("textField",["$log","$timeout","FieldHelper",function(e,t,r){return{require:"^formFor",restrict:"EA",templateUrl:"form-for/templates/text-field.html",scope:{attribute:"@",debounce:"@?",disable:"@",focused:"&?",help:"@?",iconAfter:"@?",iconAfterClicked:"&?",iconBefore:"@?",iconBeforeClicked:"&?",placeholder:"@?"},link:function(i,o,a,n){return i.attribute?(i.type=a.type||"text",i.multiline=a.hasOwnProperty("multiline")&&"false"!==a.multiline,a.hasOwnProperty("autofocus")&&t(function(){o.find(i.multiline?"textarea":"input").focus()}),i.model=n.registerFormField(i,i.attribute),i.label=r.getLabel(a,i.attribute),i.onIconAfterClick=function(){a.hasOwnProperty("iconAfterClicked")&&i.iconAfterClicked()},i.onIconBeforeClick=function(){a.hasOwnProperty("iconBeforeClicked")&&i.iconBeforeClicked()},void(i.onFocus=function(){a.hasOwnProperty("focused")&&i.focused()})):void e.error('Missing required field "attribute"')}}}]),angular.module("formFor").directive("typeAheadField",["$log","$filter","$timeout","FieldHelper","FormForConfiguration",function(e,t,r,i,o){return{require:"^formFor",restrict:"EA",templateUrl:"form-for/templates/type-ahead-field.html",scope:{attribute:"@",disable:"@",filter:"=?",help:"@?",options:"=",placeholder:"@?"},link:function(a,n,l,u){if(!a.attribute)return void e.error('Missing required field "attribute"');l.hasOwnProperty("autofocus")&&r(function(){n.find("input").focus()}),a.debounce=l.debounce||o.defaultDebounceDuration,a.labelAttribute=l.labelAttribute||"label",a.valueAttribute=l.valueAttribute||"value",a.filteredOptions=a.options||[],a.changeHandler=function(){a.filter=n.find("input").val()};var s=function(){var e=a.options||[],r={};r[a.labelAttribute]=a.filter,a.filteredOptions=t("filter")(e,r)};a.$watch("filter",s),a.$watch("options",s),a.model=u.registerFormField(a,a.attribute),a.label=i.getLabel(l,a.attribute);var d=function(){var e,t=a.model.selectedOption&&a.model.selectedOption[[a.valueAttribute]];a.model.bindable!==t&&(angular.forEach(a.options,function(t){t[a.valueAttribute]===a.model.bindable&&(e=t)}),a.model.selectedOption=e)};a.$watch("model.bindable",d),a.$watch("options",d);var c;a.$watch("model.selectedOption",function(e){return c?void(a.model.bindable=e&&e[a.valueAttribute]):void(c=!0)})}}}]),angular.module("formFor").service("FieldHelper",["FormForConfiguration","StringUtil",function(e,t){this.getLabel=function(r,i){return r.hasOwnProperty("label")?r.label:e.autoGenerateLabels?t.humanize(i):void 0}}]),angular.module("formFor").service("FormForConfiguration",function(){return{autoGenerateLabels:!1,defaultDebounceDuration:1e3,defaultSubmitComplete:angular.noop,defaultSubmitError:angular.noop,requiredLabel:null,validationFailedForCustomMessage:"Failed custom validation",validationFailedForPatternMessage:"Invalid format",validationFailedForMaxLengthMessage:"Must be fewer than {{num}} characters",validationFailedForMinLengthMessage:"Must be at least {{num}} characters",validationFailedForRequiredMessage:"Required field",validationFailedForEmailTypeMessage:"Invalid email format",validationFailedForIntegerTypeMessage:"Must be an integer",validationFailedForNegativeTypeMessage:"Must be negative",validationFailedForNumericTypeMessage:"Must be numeric",validationFailedForPositiveTypeMessage:"Must be positive",disableAutoLabels:function(){this.autoGenerateLabels=!1},enableAutoLabels:function(){this.autoGenerateLabels=!0},setDefaultDebounceDuration:function(e){this.defaultDebounceDuration=e},setDefaultSubmitComplete:function(e){this.defaultSubmitComplete=e},setDefaultSubmitError:function(e){this.defaultSubmitError=e},setRequiredLabel:function(e){this.requiredLabel=e},setValidationFailedForCustomMessage:function(e){this.validationFailedForCustomMessage=e},setValidationFailedForPatternMessage:function(e){this.validationFailedForPatternMessage=e},setValidationFailedForMaxLengthMessage:function(e){this.validationFailedForMaxLengthMessage=e},setValidationFailedForMinLengthMessage:function(e){this.validationFailedForMinLengthMessage=e},setValidationFailedForRequiredMessage:function(e){this.validationFailedForRequiredMessage=e},setValidationFailedForEmailTypeMessage:function(e){this.validationFailedForEmailTypeMessage=e},setValidationFailedForIntegerTypeMessage:function(e){this.validationFailedForIntegerTypeMessage=e},setValidationFailedForNegativeTypeMessage:function(e){this.validationFailedForNegativeTypeMessage=e},setValidationFailedForNumericTypeMessage:function(e){this.validationFailedForNumericTypeMessage=e},setValidationFailedForPositiveTypeMessage:function(e){this.validationFailedForPositiveTypeMessage=e}}}),angular.module("formFor").factory("$FormForStateHelper",["NestedObjectHelper",function(e){var t=function(e){e.errorMap=e.errorMap||{},e.valid=!0,this.formScope=e,this.fieldNameToModificationMap={},this.formSubmitted=!1,this.shallowErrorMap={},this.watchable=0};return t.prototype.getFieldError=function(t){return e.readAttribute(this.formScope.errorMap,t)},t.prototype.hasFieldBeenModified=function(t){return e.readAttribute(this.fieldNameToModificationMap,t)},t.prototype.hasFormBeenSubmitted=function(){return this.formSubmitted},t.prototype.isFieldValid=function(e){return!getFieldError(e)},t.prototype.isFormInvalid=function(){return!this.isFormValid()},t.prototype.isFormValid=function(){for(var e in this.shallowErrorMap)return!1;return!0},t.prototype.setFieldError=function(t,r){var i=e.flattenAttribute(t);e.writeAttribute(this.formScope.errorMap,t,r),r?this.shallowErrorMap[i]=r:delete this.shallowErrorMap[i],this.formScope.valid=this.isFormValid(),this.watchable++},t.prototype.setFieldHasBeenModified=function(t,r){e.writeAttribute(this.fieldNameToModificationMap,t,r),this.watchable++},t.prototype.setFormSubmitted=function(e){this.formSubmitted=e,this.watchable++},t}]),angular.module("formFor").service("ModelValidator",["$interpolate","$parse","$q","FormForConfiguration","NestedObjectHelper",function(e,t,r,i,o){return this.validateAll=function(e,t){var r=o.flattenObjectKeys(t);return this.validateFields(e,r,t)},this.validateFields=function(e,i,a){var n=r.defer(),l=[],u={},s=this;return angular.forEach(i,function(r){var i=o.readAttribute(a,r);if(i){var n=s.validateField(e,r,a);n.then(angular.noop,function(e){t(r).assign(u,e)}),l.push(n)}}),r.waitForAll(l).then(n.resolve,function(){n.reject(u)}),n.promise},this.validateField=function(a,n,l){var u=o.readAttribute(l,n),s=t(n)(a);if(u){if(s=s||"",u.required){var d=angular.isObject(u.required)?u.required.rule:u.required;if(!!s!==d)return r.reject(angular.isObject(u.required)?u.required.message:i.validationFailedForRequiredMessage)}if(u.minlength){var c=angular.isObject(u.minlength)?u.minlength.rule:u.minlength;if(s.length<c)return r.reject(angular.isObject(u.minlength)?u.minlength.message:e(i.validationFailedForMinLengthMessage)({num:c}))}if(u.maxlength){var f=angular.isObject(u.maxlength)?u.maxlength.rule:u.maxlength;if(s.length>f)return r.reject(angular.isObject(u.maxlength)?u.maxlength.message:e(i.validationFailedForMaxLengthMessage)({num:f}))}if(u.type){var m=angular.isObject(u.type)?u.type.rule:u.type,p=s.toString();if(m.indexOf("integer")>=0&&!p.match(/^\-*[0-9]+$/))return r.reject(angular.isObject(u.type)?u.type.message:i.validationFailedForIntegerTypeMessage);if(m.indexOf("number")>=0&&!p.match(/^\-*[0-9\.]+$/))return r.reject(angular.isObject(u.type)?u.type.message:i.validationFailedForNumericTypeMessage);if(m.indexOf("negative")>=0&&!p.match(/^\-[0-9\.]+$/))return r.reject(angular.isObject(u.type)?u.type.message:i.validationFailedForNegativeTypeMessage);if(m.indexOf("positive")>=0&&!p.match(/^[0-9\.]+$/))return r.reject(angular.isObject(u.type)?u.type.message:i.validationFailedForPositiveTypeMessage);if(m.indexOf("email")>=0&&!p.match(/^[\w\.\+]+@\w+\.\w+$/))return r.reject(angular.isObject(u.type)?u.type.message:i.validationFailedForEmailTypeMessage)}if(u.pattern){var b=u.pattern instanceof RegExp,F=b?u.pattern:u.pattern.rule;if(!F.exec(s))return r.reject(b?i.validationFailedForPatternMessage:u.pattern.message)}if(u.custom){var g=angular.isFunction(u.custom)?i.validationFailedForCustomMessage:u.custom.message,v=angular.isFunction(u.custom)?u.custom:u.custom.rule;try{var h=v(s,a)}catch(y){return r.reject(y.message||g)}return angular.isObject(h)&&angular.isFunction(h.then)?h.then(function(e){return r.resolve(e)},function(e){return r.reject(e||g)}):h?r.resolve(h):r.reject(g)}}return r.resolve()},this}]),angular.module("formFor").service("NestedObjectHelper",["$parse",function(e){return{flattenAttribute:function(e){return e.replace(/\./g,"___")},flattenObjectKeys:function(e){for(var t=[],r=[{object:e,prefix:null}];;){if(0===r.length)break;var i=r.pop(),o=i.prefix?i.prefix+".":"";if("object"==typeof i.object)for(var a in i.object){var n=o+a;t.push(n),r.push({object:i.object[a],prefix:n})}}return t},readAttribute:function(t,r){return e(r)(t)},writeAttribute:function(t,r,i){e(r).assign(t,i)}}}]);var qDecorator=["$delegate",function(e){return e.resolve=function(e){var t=this.defer();return t.resolve(e),t.promise},e.waitForAll=function(e){var t=this.defer(),r=[],i=0,o=!1,a=function(e,t){r.hasOwnProperty(e)||(r[e]=t,i--),n()},n=function(){0===i&&(o?t.reject(r):t.resolve(r))};return angular.forEach(e,function(e,t){i++,e.then(function(e){a(t,e)},function(e){o=!0,a(t,e)})}),n(),t.promise},e}];angular.module("formFor").config(["$provide",function(e){e.decorator("$q",qDecorator)}]),angular.module("formFor").service("StringUtil",function(){this.humanize=function(e){return e?(e=e.replace(/[A-Z]/g,function(e){return" "+e}),e=e.replace(/_([a-z])/g,function(e,t){return" "+t.toUpperCase()}),e=e.replace(/\s+/g," "),e=e.trim(),e=e.charAt(0).toUpperCase()+e.slice(1)):""}});